# DIAP智能体网络 - 去中心化智能体协议

## 🚀 项目概述

DIAP (Decentralized Intelligent Agent Protocol) 是一个基于区块链的去中心化智能体网络，支持智能体之间的身份验证、通信、支付和治理。该项目实现了巴拉吉《网络国家》中"人人可发行货币"的愿景，为智能体经济提供了完整的基础设施。

## 🏗️ 技术架构

### 核心组件

1. **DIAPAgentNetwork** - 智能体网络主合约
   - 智能体注册和管理
   - DID文档验证
   - 声誉系统
   - 消息验证

2. **DIAPToken** - 代币经济系统
   - ERC20代币
   - 质押机制
   - 奖励分配
   - 通缩机制

3. **DIAPGovernance** - 治理系统
   - 基于OpenZeppelin Governor
   - 提案和投票
   - 时间锁控制

4. **DIAPPayment** - 支付系统
   - MCP集成
   - 跨链支付
   - 隐私保护

5. **DIAPVerification** - 验证系统
   - ZKP验证
   - 身份验证
   - 防恶意行为

### 技术栈

- **区块链**: Ethereum, Polygon, Arbitrum, Optimism
- **智能合约**: Solidity ^0.8.19
- **框架**: Hardhat
- **库**: OpenZeppelin Contracts
- **ZKP**: Noir (集成中)
- **存储**: IPFS
- **通信**: Iroh P2P, libp2p

## 📋 功能特性

### 智能体管理
- ✅ 智能体注册和身份验证
- ✅ DID文档管理
- ✅ 声誉系统
- ✅ 活动跟踪

### 代币经济
- ✅ ERC20代币标准
- ✅ 多层级质押机制
- ✅ 自动奖励分配
- ✅ 通缩燃烧机制

### 通信系统
- ✅ 加密消息传递
- ✅ IPFS存储集成
- ✅ 消息验证
- ✅ 费用机制

### 服务市场
- ✅ 服务创建和完成
- ✅ 价格发现
- ✅ 收益分配
- ✅ 质量评估

### 治理系统
- ✅ 提案创建和投票
- ✅ 参数调整
- ✅ 紧急行动
- ✅ 时间锁保护

### 支付系统
- ✅ 基础支付
- ✅ 跨链支付
- ✅ 支付通道
- ✅ 隐私支付

### 验证系统
- ✅ ZKP身份验证
- ✅ 声誉证明
- ✅ 恶意行为检测
- ✅ 批量验证

## 🛠️ 安装和部署

### 环境要求

- Node.js 16+
- npm 或 yarn
- Hardhat
- Git

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd smart-eth
```

2. **安装依赖**
```bash
npm install
```

3. **配置环境**
```bash
cp .env.example .env
# 编辑.env文件，添加必要的配置
```

4. **编译合约**
```bash
npm run compile
```

5. **运行测试**
```bash
npm test
```

6. **部署合约**
```bash
npm run deploy
```

### Remix部署

1. 打开 [Remix IDE](https://remix.ethereum.org/)
2. 创建新工作区
3. 上传合约文件：
   - `contracts/DIAPAgentNetworkSimple.sol`
   - `contracts/DIAPTokenSimple.sol`
4. 编译合约
5. 部署到测试网

## 🧪 测试

### 运行测试

```bash
# 运行所有测试
npm test

# 运行特定测试
npx hardhat test tests/DIAPNetworkSimple_test.sol

# 运行测试并生成覆盖率报告
npx hardhat coverage
```

### 测试覆盖

- ✅ 代币功能测试
- ✅ 智能体注册测试
- ✅ 身份验证测试
- ✅ 消息发送测试
- ✅ 服务创建测试
- ✅ 治理投票测试
- ✅ 支付功能测试
- ✅ 集成测试

## 📊 代币经济模型

### 代币分配

- **总供应量**: 10亿 DIAP
- **初始供应**: 1亿 DIAP (10%)
- **社区分配**: 45% (4500万 DIAP)
- **国库分配**: 25% (2500万 DIAP)
- **开发者分配**: 15% (1500万 DIAP)
- **投资人分配**: 15% (1500万 DIAP)

### 质押机制

| 层级 | 最小质押 | 奖励倍数 | 锁定期 |
|------|----------|----------|--------|
| 青铜 | 1,000 DIAP | 1x | 30天 |
| 白银 | 10,000 DIAP | 1.5x | 90天 |
| 黄金 | 50,000 DIAP | 2x | 180天 |
| 铂金 | 100,000 DIAP | 3x | 365天 |

### 费用结构

- **注册费用**: 100 ETH
- **消息费用**: 1 ETH
- **服务费用率**: 3%
- **支付费用率**: 0.1%
- **跨链费用率**: 0.5%

## 🗳️ 治理机制

### 提案类型

1. **网络升级** - 合约升级和功能更新
2. **参数调整** - 费用、奖励率等参数修改
3. **资金管理** - 金库资金使用
4. **智能体政策** - 智能体相关规则
5. **代币经济** - 代币相关调整
6. **紧急行动** - 紧急情况处理

### 投票规则

- **提案门槛**: 1,000 DIAP
- **投票延迟**: 1天
- **投票期**: 3天
- **执行延迟**: 1天
- **法定人数**: 4%

## 🔒 安全特性

### 智能合约安全

- ✅ 重入攻击防护
- ✅ 整数溢出保护
- ✅ 权限控制
- ✅ 时间锁机制
- ✅ 暂停功能

### 隐私保护

- ✅ ZKP身份验证
- ✅ 隐私支付
- ✅ 消息加密
- ✅ 数据最小化

### 恶意行为防护

- ✅ 声誉系统
- ✅ 黑名单机制
- ✅ 失败尝试限制
- ✅ 自动检测

## 🌐 跨链支持

### 支持的链

- Ethereum主网
- Polygon
- Arbitrum
- Optimism

### 跨链功能

- ✅ 跨链消息传递
- ✅ 跨链支付
- ✅ 统一治理
- ✅ 资产桥接

## 📈 路线图

### Phase 1: 基础功能 (已完成)
- [x] 智能体注册
- [x] 代币系统
- [x] 基础通信
- [x] 简单治理

### Phase 2: 高级功能 (进行中)
- [ ] ZKP集成
- [ ] 跨链支持
- [ ] 隐私保护
- [ ] 高级治理

### Phase 3: 生态扩展 (计划中)
- [ ] 移动端SDK
- [ ] 开发者工具
- [ ] 第三方集成
- [ ] 社区建设

## 🤝 贡献指南

### 如何贡献

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

### 代码规范

- 使用 Solidity ^0.8.19
- 遵循 OpenZeppelin 标准
- 添加完整的注释
- 编写测试用例
- 更新文档

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 🙏 致谢

- OpenZeppelin 团队
- Hardhat 团队
- Ethereum 社区
- DIAP 协议贡献者

## 📞 联系方式

- 项目地址: [GitHub Repository]
- 文档: [Project Documentation]
- 社区: [Discord/Telegram]
- 邮箱: [Contact Email]

---

**注意**: 这是一个实验性项目，请在生产环境使用前进行充分测试和审计。
